# Workshop Studio Configuration
version: 2.0

# Workshop metadata
params:
  author: 'Shayon Sanyal'
  title: 'DAT409 - Implement hybrid search with Aurora PostgreSQL for MCP retrieval'
  description: 'Build an enterprise-grade hybrid search solution that integrates pgvector semantic search, PostgreSQL full-text search, and structured filters to enable MCP-style retrieval on Amazon Aurora PostgreSQL'
  duration: '60 minutes'
  level: '400 - Expert'
  themeVariant: aws

# Localization
defaultLocaleCode: en-US
localeCodes:
  - en-US

# AWS account configuration
awsAccountConfig:
  accountSources:
    - WorkshopStudio
    - CustomerProvided
    
  serviceLinkedRoles:
    - rds.amazonaws.com
    
  participantRole:
    iamPolicies:
      - static/iam_policy.json
      
    trustedPrincipals:
      service:
        - ec2.amazonaws.com
        - lambda.amazonaws.com
        - rds.amazonaws.com
        - monitoring.rds.amazonaws.com
        - ssm.amazonaws.com
        
  ec2KeyPair: false
  
  regionConfiguration:
    minAccessibleRegions: 1
    maxAccessibleRegions: 1
    deployableRegions:
      required:
        - us-west-2

# Infrastructure deployment
infrastructure:
  cloudformationTemplates:
    - templateLocation: static/dat409-hybrid-search.yml
      label: "DAT409 - Hybrid Search Workshop Infrastructure"
      
      # Workshop Studio magic variables
      parameters:
        - templateParameter: ParticipantRoleArn
          defaultValue: "{{.ParticipantRoleArn}}"
          
        - templateParameter: AssetsBucketName
          defaultValue: "{{.AssetsBucketName}}"
          
        - templateParameter: AssetsBucketPrefix
          defaultValue: "{{.AssetsBucketPrefix}}"
          
        - templateParameter: PublicAssetsBucketName
          defaultValue: "{{.AssetsBucketName}}"
          
        - templateParameter: PublicAssetsBucketPrefix
          defaultValue: "{{.AssetsBucketPrefix}}"
          
        - templateParameter: IsWorkshopStudioEnv
          defaultValue: "yes"
          
        - templateParameter: WorkshopName
          defaultValue: "dat409-hybrid-search"
          
        - templateParameter: GitHubRepo
          defaultValue: "https://github.com/aws-samples/sample-dat409-hybrid-search-aurora-mcp.git"
          
        - templateParameter: CodeEditorInstanceType
          defaultValue: "t4g.large"
      
      # Participant visible outputs
      participantVisibleStackOutputs:
        - WorkshopURL